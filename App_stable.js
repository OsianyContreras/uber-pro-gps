var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault").default;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _React=React,useState=_React.useState,useRef=_React.useRef,useEffect=_React.useEffect;function App(){var _useState=useState(null),_useState2=(0,_slicedToArray2.default)(_useState,2),preview=_useState2[0],setPreview=_useState2[1];var _useState3=useState(''),_useState4=(0,_slicedToArray2.default)(_useState3,2),text=_useState4[0],setText=_useState4[1];var _useState5=useState(''),_useState6=(0,_slicedToArray2.default)(_useState5,2),coordinates=_useState6[0],setCoordinates=_useState6[1];var _useState7=useState(''),_useState8=(0,_slicedToArray2.default)(_useState7,2),address=_useState8[0],setAddress=_useState8[1];var _useState9=useState(false),_useState0=(0,_slicedToArray2.default)(_useState9,2),loading=_useState0[0],setLoading=_useState0[1];var _useState1=useState(0),_useState10=(0,_slicedToArray2.default)(_useState1,2),progress=_useState10[0],setProgress=_useState10[1];var _useState11=useState(false),_useState12=(0,_slicedToArray2.default)(_useState11,2),copied=_useState12[0],setCopied=_useState12[1];var _useState13=useState(false),_useState14=(0,_slicedToArray2.default)(_useState13,2),shared=_useState14[0],setShared=_useState14[1];var _useState15=useState('upload'),_useState16=(0,_slicedToArray2.default)(_useState15,2),mode=_useState16[0],setMode=_useState16[1];var _useState17=useState(''),_useState18=(0,_slicedToArray2.default)(_useState17,2),error=_useState18[0],setError=_useState18[1];var _useState19=useState(''),_useState20=(0,_slicedToArray2.default)(_useState19,2),extractedLocation=_useState20[0],setExtractedLocation=_useState20[1];var _useState21=useState(false),_useState22=(0,_slicedToArray2.default)(_useState21,2),scanAnimation=_useState22[0],setScanAnimation=_useState22[1];var _useState23=useState(window.innerHeight),_useState24=(0,_slicedToArray2.default)(_useState23,2),appHeight=_useState24[0],setAppHeight=_useState24[1];var _useState25=useState(false),_useState26=(0,_slicedToArray2.default)(_useState25,2),isProcessing=_useState26[0],setIsProcessing=_useState26[1];var _useState27=useState('#FF4D4D'),_useState28=(0,_slicedToArray2.default)(_useState27,2),scanColor=_useState28[0],setScanColor=_useState28[1];var fileInputRef=useRef(null);var videoRef=useRef(null);var canvasRef=useRef(null);var _useState29=useState('capture'),_useState30=(0,_slicedToArray2.default)(_useState29,2),activeTab=_useState30[0],setActiveTab=_useState30[1];var _useState31=useState(true),_useState32=(0,_slicedToArray2.default)(_useState31,2),showSplash=_useState32[0],setShowSplash=_useState32[1];var contentRef=useRef(null);var _useState33=useState(false),_useState34=(0,_slicedToArray2.default)(_useState33,2),hasAutoOpenedFilePicker=_useState34[0],setHasAutoOpenedFilePicker=_useState34[1];var _useState35=useState([]),_useState36=(0,_slicedToArray2.default)(_useState35,2),history=_useState36[0],setHistory=_useState36[1];var _useState37=useState(false),_useState38=(0,_slicedToArray2.default)(_useState37,2),isEditing=_useState38[0],setIsEditing=_useState38[1];var _useState39=useState(''),_useState40=(0,_slicedToArray2.default)(_useState39,2),editableText=_useState40[0],setEditableText=_useState40[1];useEffect(function(){if(progress===100&&!loading&&extractedLocation){setTimeout(function(){setActiveTab('results');},500);}},[progress,loading,extractedLocation]);useEffect(function(){var updateHeight=function updateHeight(){setAppHeight(window.innerHeight);};window.addEventListener('resize',updateHeight);window.addEventListener('orientationchange',updateHeight);return function(){window.removeEventListener('resize',updateHeight);window.removeEventListener('orientationchange',updateHeight);};},[]);useEffect(function(){if(progress<25){setScanColor('#FF4D4D');}else if(progress<50){setScanColor('#FFB74D');}else if(progress<75){setScanColor('#FFD700');}else{setScanColor('#4CD964');}},[progress]);useEffect(function(){var timer=setTimeout(function(){setShowSplash(false);},6000);return function(){return clearTimeout(timer);};},[]);useEffect(function(){var savedHistory=localStorage.getItem('ubertronHistory');if(savedHistory){try{setHistory(JSON.parse(savedHistory));}catch(e){console.error("Error loading history",e);}}},[]);useEffect(function(){localStorage.setItem('ubertronHistory',JSON.stringify(history));},[history]);useEffect(function(){var mounted=true;if(mode==='camera'){startCamera();}else{stopCamera();}return function(){stopCamera();};},[mode]);useEffect(function(){if(contentRef.current){var tabHeight=65;var headerHeight=80;var footerHeight=55;var mainHeight=appHeight-tabHeight-headerHeight-footerHeight;contentRef.current.style.minHeight=`${mainHeight}px`;}},[appHeight,activeTab]);var startCamera=function(){var _ref=(0,_asyncToGenerator2.default)(function*(){try{var stream=yield navigator.mediaDevices.getUserMedia({video:{facingMode:'environment',width:{ideal:1280},height:{ideal:720}}});if(videoRef.current){videoRef.current.srcObject=stream;}}catch(err){console.error('Error accessing camera:',err);setError('No se pudo acceder a la cÃ¡mara. AsegÃºrate de permitir el acceso.');}});return function startCamera(){return _ref.apply(this,arguments);};}();var stopCamera=function stopCamera(){if(videoRef.current&&videoRef.current.srcObject){var stream=videoRef.current.srcObject;var tracks=stream.getTracks();tracks.forEach(function(track){return track.stop();});videoRef.current.srcObject=null;}};var resizeImage=function resizeImage(base64Str){var maxWidth=arguments.length>1&&arguments[1]!==undefined?arguments[1]:800;return new Promise(function(resolve){var img=new Image();img.src=base64Str;img.onload=function(){var canvas=document.createElement('canvas');var width=img.width;var height=img.height;if(width>maxWidth){height=maxWidth/width*height;width=maxWidth;}canvas.width=width;canvas.height=height;var ctx=canvas.getContext('2d');ctx.drawImage(img,0,0,width,height);try{var imageData=ctx.getImageData(0,0,width,height);var data=imageData.data;for(var i=0;i<data.length;i+=4){var avg=(data[i]+data[i+1]+data[i+2])/3;data[i]=avg;data[i+1]=avg;data[i+2]=avg;}ctx.putImageData(imageData,0,0);}catch(e){console.warn("No se pudo aplicar escala de grises:",e);}resolve(canvas.toDataURL('image/jpeg',0.6));};img.onerror=function(err){console.error("Error cargando imagen para redimensionar",err);resolve(base64Str);};});};var processImage=function(){var _ref2=(0,_asyncToGenerator2.default)(function*(imageData){setPreview(imageData);setLoading(true);setProgress(0);setExtractedLocation('');setError('');console.log("=== INICIO PROCESO DE IMAGEN (MODO OPTIMIZADO) ===");try{if(typeof Tesseract==='undefined'){alert("ERROR CRÃTICO: Tesseract no se cargÃ³.");throw new Error("LibrerÃ­a Tesseract no encontrada");}var worker=yield Tesseract.createWorker({workerPath:'libs/worker.min.js',corePath:'libs/tesseract-core.wasm.js',langPath:'libs/',logger:function logger(m){console.log("Tesseract:",m.status,m.progress);if(m.status==='recognizing text'){setProgress(Math.round(m.progress*100));}}});console.log("Worker inicializado. Cargando idioma...");yield worker.loadLanguage('eng');yield worker.initialize('eng');console.log("Escanenando...");var result=yield worker.recognize(imageData);var _text=result.data.text;console.log("Texto extraÃ­do longitud:",_text?_text.length:0);yield worker.terminate();setText(_text);extractLocationInfo(_text);setProgress(100);}catch(error){console.error('Error en OCR:',error);setError('Error al procesar: '+(error.message||'Error desconocido'));}finally{setLoading(false);setIsProcessing(false);setScanAnimation(false);console.log("=== FIN PROCESO DE IMAGEN ===");}});return function processImage(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){if(window.ReactNativeWebView){window.ReactNativeWebView.postMessage('LIBS_LOADED_OK');}var handleMessage=function handleMessage(event){};window.addEventListener('message',handleMessage);window.handleNativeImageReceive=function(){var _ref3=(0,_asyncToGenerator2.default)(function*(imageUri){try{setPreview(imageUri);setTimeout(function(){setScanAnimation(true);setIsProcessing(true);processImage(imageUri);},500);}catch(e){alert("Error procesando imagen nativa: "+e.message);}});return function(_x2){return _ref3.apply(this,arguments);};}();return function(){window.removeEventListener('message',handleMessage);delete window.handleNativeImageReceive;};},[]);var triggerFileInput=function triggerFileInput(){if(window.ReactNativeWebView){window.ReactNativeWebView.postMessage('PICK_IMAGE');}else{if(fileInputRef.current){fileInputRef.current.click();}}};var captureImage=function(){var _ref4=(0,_asyncToGenerator2.default)(function*(){if(!videoRef.current)return;var canvas=canvasRef.current;var video=videoRef.current;if(!canvas||!video)return;var aspectRatio=video.videoWidth/video.videoHeight;canvas.width=Math.min(video.videoWidth,1024);canvas.height=canvas.width/aspectRatio;var context=canvas.getContext('2d');context.drawImage(video,0,0,canvas.width,canvas.height);var imageData=canvas.toDataURL('image/jpeg',0.8);setPreview(imageData);setScanAnimation(true);setIsProcessing(true);processImage(imageData);});return function captureImage(){return _ref4.apply(this,arguments);};}();var handleImageUpload=function handleImageUpload(event){var file=event.target.files[0];if(!file)return;if(!file.type.match('image.*')){setError('Por favor, selecciona un archivo de imagen vÃ¡lido');alert('Tipo de archivo no vÃ¡lido');return;}var reader=new FileReader();reader.onload=function(){var _ref5=(0,_asyncToGenerator2.default)(function*(e){var rawImageData=e.target.result;var resizedImageData=yield resizeImage(rawImageData,1024);setPreview(resizedImageData);setScanAnimation(true);setIsProcessing(true);processImage(resizedImageData);});return function(_x3){return _ref5.apply(this,arguments);};}();reader.onerror=function(err){setError('Error al leer el archivo');console.error(err);};reader.readAsDataURL(file);};var extractLocationInfo=function extractLocationInfo(text){if(!text)return;try{var cleanText=text.replace(/\n/g,' ').replace(/\s+/g,' ');console.log("Texto limpio para extracciÃ³n:",cleanText.substring(0,100)+"...");var coordinateRegex=/([-+]?\d{1,3}[.,]\d{3,}\s*[,;]\s*[-+]?\d{1,3}[.,]\d{3,})|(\d{1,3}Â°\d{1,2}'\d{1,2}(\.\d+)?\"[NS]\s*\d{1,3}Â°\d{1,2}'\d{1,2}(\.\d+)?\"[EW])/g;var coordinatesMatch=text.match(coordinateRegex);if(coordinatesMatch){var rawCoords=coordinatesMatch[0];var numberPattern=/[-+]?\d+[.,]\d+/g;var parts=rawCoords.match(numberPattern);if(parts&&parts.length>=2){var lat=parts[0].replace(',','.');var lng=parts[1].replace(',','.');var finalCoords=`${lat}, ${lng}`;console.log("Coordenadas normalizadas:",finalCoords);setCoordinates(finalCoords);setExtractedLocation('ðŸ“ '+finalCoords);return;}setCoordinates(rawCoords);setExtractedLocation(rawCoords);return;}var labelRegex=/(?:Direcci[oÃ³]n|Domicilio|Ubicaci[oÃ³]n|Address|Lugar|Destino|Entrega)\s*[:\.]?\s*([^\n]+(?:\n[^\n]+)?)/gi;var labelMatch=labelRegex.exec(text);if(labelMatch&&labelMatch[1]&&labelMatch[1].length>5){var addr=labelMatch[1].trim().replace(/\s+/g,' ');console.log("DirecciÃ³n por etiqueta encontrada:",addr);setAddress(addr);setExtractedLocation('ðŸ“ '+addr);return;}var addressKeywords=[/\b(?:Reg|Region|RegiÃ³n|Supermanzana|Superm|Sm|Manzana|Mza|Mz|Lote|Lte|Lt|Solar|Condominio|Cond|Edificio|Depto|Departamento)[\s\.]*\d+[\w\d\s#\-\.,Ã¡Ã©Ã­Ã³ÃºÃ±ÃÃ‰ÃÃ“ÃšÃ‘]{5,150}/gi,/\b(?:Calle|Carrera|Cra|Cll|Cl|Ave|Avenida|Av|Transversal|Trans|Tv|Diagonal|Diag|Dg|Circular|Circ|VÃ­a|Via|Boulevard|Blvd|Camino|Carretera|Autopista|Paseo|Plaza|Glorieta|Interior|Int|Apartamento|Apto|Oficina|Of|Casa|Colonia|Col|Barrio|Urb|Sector)\b[\w\d\s#\-\.,Ã¡Ã©Ã­Ã³ÃºÃ±ÃÃ‰ÃÃ“ÃšÃ‘]{5,150}/gi,/\d{1,5}\s+[A-Za-z0-9\s\.]+?(?:Street|St|Avenue|Ave|Road|Rd|Lane|Ln|Drive|Dr|Boulevard|Blvd|Way|Plaza|Square)\b/gi,/[#NnÂºÂ°]\s*\d{1,5}\s*[-â€“]\s*\d{1,5}\s*[-â€“]?\s*\d{0,5}/gi];for(var pattern of addressKeywords){var match=cleanText.match(pattern);if(match){var bestMatch=match.find(function(m){return /\d/.test(m);})||match.reduce(function(a,b){return a.length>b.length?a:b;});var _addr=bestMatch.trim();console.log("DirecciÃ³n con keyword encontrada:",_addr);var finalAddr=_addr.replace(/^[^a-zA-Z0-9]+/,'');setAddress(finalAddr);setExtractedLocation('ðŸ“ '+finalAddr);return;}}var lines=text.split('\n');for(var line of lines){var trimmed=line.trim();if(trimmed.length>8&&trimmed.length<100&&/[a-zA-Z]/.test(trimmed)&&/\d/.test(trimmed)&&!/\d{2}:\d{2}/.test(trimmed)&&!/\d{2}\/\d{2}/.test(trimmed)){console.log("Posible direcciÃ³n genÃ©rica (lÃ­nea):",trimmed);setAddress(trimmed);setExtractedLocation('ðŸ“ '+trimmed);return;}}}catch(err){console.error("Error SAFETY en extractLocationInfo:",err);}};var copyToClipboard=function copyToClipboard(textToCopy){navigator.clipboard.writeText(textToCopy).then(function(){setCopied(true);setTimeout(function(){return setCopied(false);},2000);}).catch(function(err){console.error('Error copying:',err);setError('Error al copiar al portapapeles');});};var shareContent=function(){var _ref6=(0,_asyncToGenerator2.default)(function*(){var textToShare=coordinates||address||extractedLocation;if(!textToShare){setError('No hay contenido para compartir');return;}console.log("Intentando compartir:",textToShare);if(navigator.share){try{yield navigator.share({title:'UbicaciÃ³n - Ubertron',text:textToShare});setShared(true);setTimeout(function(){return setShared(false);},2000);}catch(error){console.log("Share API error/cancel:",error);}}else{copyToClipboard(textToShare);alert('Enlace copiado al portapapeles (Tu dispositivo no soporta compartir nativo desde Web)');}});return function shareContent(){return _ref6.apply(this,arguments);};}();var fallbackShare=function fallbackShare(text){navigator.clipboard.writeText(text).then(function(){setShared(true);setTimeout(function(){return setShared(false);},2000);alert('âœ… Texto copiado al portapapeles. Ahora puedes pegarlo en cualquier app para compartir.');}).catch(function(err){console.error('Error al copiar:',err);setError('Error al intentar compartir');});};var openNativeUrl=function openNativeUrl(url){if(window.ReactNativeWebView){window.ReactNativeWebView.postMessage('OPEN_URL:'+url);}else{window.open(url,'_blank');}};var openInGoogleMaps=function openInGoogleMaps(){var query=coordinates||address||extractedLocation;if(!query)return;if(coordinates){var parts=coordinates.match(/([-+]?\d+(?:\.\d+)?)[,\s]+([-+]?\d+(?:\.\d+)?)/);if(parts&&parts.length>=3){var lat=parts[1];var lng=parts[2];query=`${lat.trim()},${lng.trim()}`;console.log("Coordenadas Google formateadas:",query);openNativeUrl(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`);return;}}var encodedQuery=encodeURIComponent(query);openNativeUrl(`https://www.google.com/maps/search/?api=1&query=${encodedQuery}`);};var openInAppleMaps=function openInAppleMaps(){var query=coordinates||address||extractedLocation;if(!query)return;if(coordinates){var parts=coordinates.match(/([-+]?\d+(?:\.\d+)?)[,\s]+([-+]?\d+(?:\.\d+)?)/);if(parts&&parts.length>=3){var lat=parts[1].trim();var lng=parts[2].trim();query=`${lat},${lng}`;console.log("Coordenadas Apple formateadas:",query);var encodedQ=encodeURIComponent(query);openNativeUrl(`http://maps.apple.com/?ll=${lat},${lng}&q=${encodedQ}`);return;}}var encodedQuery=encodeURIComponent(query);openNativeUrl(`http://maps.apple.com/?q=${encodedQuery}`);};var openInSygic=function openInSygic(){var query=coordinates||address||extractedLocation;if(!query)return;if(coordinates){var parts=coordinates.match(/([-+]?\d+(\.\d+)?)/g);if(parts&&parts.length>=2){var lat=parts[0];var lng=parts[1];openNativeUrl(`com.sygic.aura://coordinate|${lng}|${lat}|drive`);return;}}var encodedQuery=encodeURIComponent(query);openNativeUrl(`https://go.sygic.com/travel/place?q=${encodedQuery}`);};var resetAll=function resetAll(){setPreview(null);setText('');setCoordinates('');setAddress('');setLoading(false);setProgress(0);setCopied(false);setShared(false);setError('');setExtractedLocation('');setScanAnimation(false);setIsProcessing(false);setActiveTab('capture');setHasAutoOpenedFilePicker(false);stopCamera();if(fileInputRef.current){fileInputRef.current.value='';}};return React.createElement("div",{className:"app-container",style:{height:`${appHeight}px`}},showSplash&&React.createElement("div",{className:"splash-screen"},React.createElement("div",{className:"splash-content"},React.createElement("div",{className:"splash-icon-container"},React.createElement("div",{className:"splash-pulse-ring"}),React.createElement("div",{className:"splash-pulse-ring delay-1"}),React.createElement("div",{className:"splash-icon"},"\uD83C\uDF0D")),React.createElement("h1",{className:"splash-title"},"UBERTRON"),React.createElement("h2",{className:"splash-subtitle"},"PRO VISION"),React.createElement("div",{className:"splash-loader"},React.createElement("div",{className:"splash-bar"})),React.createElement("div",{className:"splash-contact"},React.createElement("div",{className:"contact-row"},React.createElement("span",{className:"contact-icon"},"\uD83D\uDCE7"),React.createElement("span",{className:"contact-text"},"osiany@outlook.com")),React.createElement("div",{className:"contact-row"},React.createElement("span",{className:"contact-icon"},"\uD83D\uDCF1"),React.createElement("span",{className:"contact-text"},"Cel. 9983008729"))))),React.createElement("header",{className:"app-header"},React.createElement("div",{className:"header-glow"}),React.createElement("div",{className:"header-content"},React.createElement("h1",{className:"app-title"},React.createElement("span",{className:"app-icon"},"\uD83C\uDF0D"),React.createElement("div",{className:"title-text"},React.createElement("div",{className:"main-title"},"UBERTRON PRO"),React.createElement("div",{className:"sub-title"},"VISION v6.0 NATIVE"))),React.createElement("p",{className:"app-subtitle"},"INTELIGENCIA ARTIFICIAL PARA UBICACIONES")),React.createElement("div",{className:"header-pulse"},React.createElement("div",{className:"pulse-dot"}),React.createElement("div",{className:"pulse-ring"}))),React.createElement("nav",{className:"app-tabs"},React.createElement("button",{className:`tab-btn ${activeTab==='capture'?'active':''}`,onClick:function onClick(){return setActiveTab('capture');}},React.createElement("div",{className:"tab-icon-container"},React.createElement("div",{className:"tab-glow"}),React.createElement("span",{className:"tab-icon"},"\uD83D\uDCF8")),React.createElement("span",null,"Captura"),React.createElement("div",{className:"tab-indicator"})),React.createElement("button",{className:`tab-btn ${activeTab==='results'?'active':''}`,onClick:function onClick(){return setActiveTab('results');}},React.createElement("div",{className:"tab-icon-container"},React.createElement("div",{className:"tab-glow"}),React.createElement("span",{className:"tab-icon"},"\uD83D\uDCCD")),React.createElement("span",null,"Ubicaci\xF3n"),React.createElement("div",{className:"tab-indicator"})),React.createElement("button",{className:`tab-btn ${activeTab==='text'?'active':''}`,onClick:function onClick(){return setActiveTab('text');}},React.createElement("div",{className:"tab-icon-container"},React.createElement("div",{className:"tab-glow"}),React.createElement("span",{className:"tab-icon"},"\uD83D\uDCC4")),React.createElement("span",null,"Texto"),React.createElement("div",{className:"tab-indicator"})),React.createElement("button",{className:`tab-btn ${activeTab==='history'?'active':''}`,onClick:function onClick(){return setActiveTab('history');}},React.createElement("div",{className:"tab-icon-container"},React.createElement("div",{className:"tab-glow"}),React.createElement("span",{className:"tab-icon"},"\uD83D\uDD52")),React.createElement("span",null,"Historial"),React.createElement("div",{className:"tab-indicator"}))),React.createElement("main",{className:"app-main",ref:contentRef},activeTab==='capture'&&React.createElement("div",{className:"tab-content"},React.createElement("input",{ref:fileInputRef,type:"file",accept:"image/*",onChange:handleImageUpload,className:"file-input-hidden"}),!preview&&React.createElement("div",{className:"glass-card"},React.createElement("div",{className:"card-header"},React.createElement("div",{className:"card-icon"},"\u2699\uFE0F"),React.createElement("h2",{className:"card-title"},"SELECCIONA TU MODO")),React.createElement("div",{className:"mode-grid"},React.createElement("button",{className:`mode-option ${mode==='upload'?'active':''}`,onClick:function onClick(){setMode('upload');setHasAutoOpenedFilePicker(false);setTimeout(function(){if(window.ReactNativeWebView){window.ReactNativeWebView.postMessage('PICK_IMAGE');setHasAutoOpenedFilePicker(true);}else if(fileInputRef.current){fileInputRef.current.click();setHasAutoOpenedFilePicker(true);}},100);}},React.createElement("div",{className:"mode-glow"}),React.createElement("div",{className:"mode-icon"},"\uD83D\uDCC1"),React.createElement("div",{className:"mode-content"},React.createElement("h3",null,"SUBIR ARCHIVO"),React.createElement("p",null,"Selecciona desde tu galer\xEDa"),React.createElement("div",{className:"mode-badge"},"RECOMENDADO"))),React.createElement("button",{className:`mode-option ${mode==='camera'?'active':''}`,onClick:function onClick(){return setMode('camera');}},React.createElement("div",{className:"mode-glow"}),React.createElement("div",{className:"mode-icon"},"\uD83D\uDCF7"),React.createElement("div",{className:"mode-content"},React.createElement("h3",null,"CAPTURA EN VIVO"),React.createElement("p",null,"Usa tu c\xE1mara en tiempo real"),React.createElement("div",{className:"mode-badge"},"INSTANT\xC1NEO"))))),mode==='camera'&&!preview&&React.createElement("div",{className:"glass-card camera-card"},React.createElement("div",{className:"card-header"},React.createElement("div",{className:"card-icon"},"\uD83C\uDFA5"),React.createElement("h2",{className:"card-title"},"C\xC1MARA ACTIVA")),React.createElement("div",{className:"camera-preview"},React.createElement("div",{className:"camera-frame"},React.createElement("video",{ref:videoRef,autoPlay:true,playsInline:true,muted:true,className:"camera-view"}),React.createElement("canvas",{ref:canvasRef,style:{display:'none'}}),React.createElement("div",{className:"camera-overlay"},React.createElement("div",{className:"scan-grid"}),React.createElement("div",{className:"focus-ring"}))),React.createElement("button",{className:"action-btn capture-btn",onClick:captureImage,disabled:isProcessing,style:isProcessing?{background:`linear-gradient(135deg, ${scanColor} 0%, ${scanColor}80 100%)`,boxShadow:`0 0 20px ${scanColor}40`}:{}},React.createElement("div",{className:"btn-glow"}),React.createElement("span",{className:"btn-icon"},isProcessing?'ðŸ”':'ðŸ“¸'),React.createElement("span",{className:"btn-text"},isProcessing?`ESCANEANDO ${progress}%`:'CAPTURAR IMAGEN')))),preview&&React.createElement("div",{className:"glass-card preview-card"},React.createElement("div",{className:"card-header"},React.createElement("div",{className:"card-icon"},"\uD83D\uDC41\uFE0F"),React.createElement("h2",{className:"card-title"},"VISTA PREVIA")),React.createElement("div",{className:"preview-container"},React.createElement("div",{className:"image-frame"},React.createElement("img",{src:preview,alt:"Preview",className:"preview-image"}),scanAnimation&&React.createElement("div",{className:"scan-animation"},React.createElement("div",{className:"scan-line",style:{top:`${progress}%`,backgroundColor:scanColor,boxShadow:`0 0 20px ${scanColor}`}}),React.createElement("div",{className:"scan-dots"},React.createElement("div",{className:"scan-dot",style:{animationDelay:'0s',backgroundColor:scanColor,left:'20%',top:`${progress}%`}}),React.createElement("div",{className:"scan-dot",style:{animationDelay:'0.5s',backgroundColor:scanColor,left:'50%',top:`${progress}%`}}),React.createElement("div",{className:"scan-dot",style:{animationDelay:'1s',backgroundColor:scanColor,left:'80%',top:`${progress}%`}})),React.createElement("div",{className:"progress-overlay"},React.createElement("div",{className:"progress-header"},React.createElement("span",{className:"progress-title"},"ESCANEANDO IMAGEN"),React.createElement("span",{className:"progress-value",style:{color:scanColor}},progress,"%")),React.createElement("div",{className:"progress-bar-container"},React.createElement("div",{className:"progress-track"},React.createElement("div",{className:"progress-indicator",style:{width:`${progress}%`,background:scanColor}}),React.createElement("div",{className:"color-markers"},React.createElement("div",{className:"color-marker red",style:{left:'0%'}}),React.createElement("div",{className:"color-marker orange",style:{left:'25%'}}),React.createElement("div",{className:"color-marker yellow",style:{left:'50%'}}),React.createElement("div",{className:"color-marker green",style:{left:'75%'}}))),React.createElement("div",{className:"progress-labels"},React.createElement("span",{className:"progress-label",style:{color:progress>=0?scanColor:'#777'}},"ROJO"),React.createElement("span",{className:"progress-label",style:{color:progress>=25?scanColor:'#777'}},"NARANJA"),React.createElement("span",{className:"progress-label",style:{color:progress>=50?scanColor:'#777'}},"AMARILLO"),React.createElement("span",{className:"progress-label",style:{color:progress>=75?scanColor:'#777'}},"VERDE")))))),React.createElement("button",{className:"action-btn secondary",onClick:function onClick(){if(isProcessing){}else if(preview&&!isProcessing&&progress===0){setIsProcessing(true);setScanAnimation(true);processImage(preview);}else{resetAll();}},style:isProcessing?{background:`linear-gradient(135deg, ${scanColor} 0%, ${scanColor}80 100%)`,color:'white',border:'none',boxShadow:`0 0 20px ${scanColor}40`}:preview&&!isProcessing&&progress===0?{background:'#4CD964',color:'white'}:{}},React.createElement("span",{className:"btn-icon"},isProcessing?'ðŸ”':preview&&!isProcessing&&progress===0?'â–¶ï¸':'ðŸ”„'),React.createElement("span",{className:"btn-text"},isProcessing?`ESCANEANDO ${progress}%`:preview&&!isProcessing&&progress===0?'INICIAR ESCANEO':'CAMBIAR IMAGEN')))),loading&&React.createElement("div",{className:"glass-card processing-card"},React.createElement("div",{className:"card-header"},React.createElement("div",{className:"card-icon"},"\u26A1"),React.createElement("h2",{className:"card-title"},"PROCESANDO CON IA")),React.createElement("div",{className:"processing-content"},React.createElement("div",{className:"ai-loader"},React.createElement("div",{className:"loader-ring",style:{borderTopColor:scanColor}}),React.createElement("div",{className:"loader-core",style:{background:`linear-gradient(135deg, ${scanColor} 0%, ${scanColor}80 100%)`}}),React.createElement("div",{className:"loader-particle",style:{backgroundColor:scanColor}})),React.createElement("div",{className:"processing-info"},React.createElement("h3",{className:"processing-title"},"ANALIZANDO TU IMAGEN"),React.createElement("div",{className:"ai-progress"},React.createElement("div",{className:"ai-progress-bar"},React.createElement("div",{className:"ai-progress-fill",style:{width:`${progress}%`}})),React.createElement("div",{className:"progress-labels"},React.createElement("span",{style:{color:progress>=0?scanColor:'#999'}},"0%"),React.createElement("span",{style:{color:progress>=25?scanColor:'#999'}},"25%"),React.createElement("span",{style:{color:progress>=50?scanColor:'#999'}},"50%"),React.createElement("span",{style:{color:progress>=75?scanColor:'#999'}},"75%"),React.createElement("span",{style:{color:progress>=100?scanColor:'#999'}},"100%")),React.createElement("div",{className:"progress-text",style:{color:scanColor}},progress,"% COMPLETADO")),React.createElement("div",{className:"processing-details"},React.createElement("div",{className:"detail"},React.createElement("span",{className:"detail-icon"},"\uD83D\uDD0D"),React.createElement("span",{className:"detail-text"},"Extrayendo texto con OCR avanzado")),React.createElement("div",{className:"detail"},React.createElement("span",{className:"detail-icon"},"\uD83E\uDDE0"),React.createElement("span",{className:"detail-text"},"Analizando patrones de ubicaci\xF3n")),React.createElement("div",{className:"detail"},React.createElement("span",{className:"detail-icon"},"\u26A1"),React.createElement("span",{className:"detail-text"},"Optimizando resultados con IA")))))),error&&React.createElement("div",{className:"glass-card error-card"},React.createElement("div",{className:"error-content"},React.createElement("div",{className:"error-icon"},"\u26A0\uFE0F"),React.createElement("h2",{className:"error-title"},"ALGO SALI\xD3 MAL"),React.createElement("p",{className:"error-text"},error),React.createElement("button",{className:"action-btn secondary",onClick:resetAll},React.createElement("span",{className:"btn-icon"},"\uD83D\uDD04"),React.createElement("span",{className:"btn-text"},"INTENTAR DE NUEVO"))))),activeTab==='results'&&React.createElement("div",{className:"tab-content"},extractedLocation?React.createElement("div",{className:"glass-card result-card"},React.createElement("div",{className:"card-header"},React.createElement("div",{className:"card-icon"},"\uD83C\uDFAF"),React.createElement("h2",{className:"card-title"},"RESULTADOS ENCONTRADOS")),React.createElement("div",{className:"result-content"},React.createElement("div",{className:"location-header"},React.createElement("div",{className:"location-icon"},coordinates?'ðŸ“':'ðŸ ',React.createElement("div",{className:"icon-glow"})),React.createElement("div",{className:"location-type"},React.createElement("h3",null,coordinates?'COORDENADAS GPS':'DIRECCIÃ“N'),React.createElement("p",null,coordinates?'PrecisiÃ³n mÃ¡xima':'ExtraÃ­da del texto'))),React.createElement("div",{className:"location-display"},React.createElement("div",{className:"location-text"},isEditing?React.createElement("textarea",{className:"edit-area",value:editableText,onChange:function onChange(e){return setEditableText(e.target.value);},style:{width:'100%',background:'transparent',border:'1px solid var(--accent)',color:'white',borderRadius:'8px',padding:'10px',fontSize:'inherit',fontFamily:'inherit',minHeight:'80px'}}):coordinates||address||extractedLocation),React.createElement("button",{className:`edit-btn-float ${isEditing?'active':''}`,onClick:handleEditToggle,style:{position:'absolute',top:'-15px',right:'10px',background:'var(--primary)',border:'none',borderRadius:'50%',width:'35px',height:'35px',display:'flex',alignItems:'center',justifyContent:'center',color:'white',fontSize:'1.2rem',boxShadow:'0 0 15px var(--primary)',zIndex:5}},isEditing?'ðŸ’¾':'âœï¸'),React.createElement("div",{className:"button-group"},React.createElement("button",{className:`copy-btn ${copied?'copied':''}`,onClick:function onClick(){return copyToClipboard(coordinates||address||extractedLocation);}},React.createElement("div",{className:"copy-glow"}),React.createElement("span",{className:"copy-icon"},copied?'âœ“':'ðŸ“‹'),React.createElement("span",{className:"copy-text"},copied?'COPIADO':'COPIAR')),React.createElement("button",{className:`share-btn ${shared?'shared':''}`,onClick:shareContent},React.createElement("div",{className:"copy-glow"}),React.createElement("span",{className:"copy-icon"},"\uD83D\uDCE4"),React.createElement("span",{className:"copy-text"},shared?'COMPARTIDO':'COMPARTIR')))),React.createElement("p",{className:"location-hint"},copied?'âœ… Â¡Texto copiado al portapapeles!':shared?'âœ… Â¡Contenido compartido exitosamente!':'ðŸ‘† Copia o comparte la ubicaciÃ³n extraÃ­da')),React.createElement("div",{className:"actions-section"},React.createElement("h3",{className:"actions-title"},"ACCIONES DISPONIBLES"),React.createElement("div",{className:"actions-grid-2x2"},React.createElement("button",{className:"action-card-2x2 sygic",onClick:openInSygic},React.createElement("div",{className:"action-glow-2x2"}),React.createElement("div",{className:"action-icon-2x2"},"\uD83D\uDDFA\uFE0F"),React.createElement("div",{className:"action-label-2x2"},"SYGIC"),React.createElement("div",{className:"action-sub-2x2"},"Abrir mapa")),React.createElement("button",{className:"action-card-2x2 google",onClick:openInGoogleMaps},React.createElement("div",{className:"action-glow-2x2"}),React.createElement("div",{className:"action-icon-2x2"},"\uD83C\uDF10"),React.createElement("div",{className:"action-label-2x2"},"GOOGLE"),React.createElement("div",{className:"action-sub-2x2"},"Maps")),React.createElement("button",{className:"action-card-2x2 apple",onClick:openInAppleMaps},React.createElement("div",{className:"action-glow-2x2"}),React.createElement("div",{className:"action-icon-2x2"},"\uD83C\uDF4E"),React.createElement("div",{className:"action-label-2x2"},"APPLE"),React.createElement("div",{className:"action-sub-2x2"},"Maps")),React.createElement("button",{className:"action-card-2x2 reset",onClick:resetAll},React.createElement("div",{className:"action-glow-2x2"}),React.createElement("div",{className:"action-icon-2x2"},"\uD83D\uDD04"),React.createElement("div",{className:"action-label-2x2"},"NUEVO"),React.createElement("div",{className:"action-sub-2x2"},"Escanear"))))):React.createElement("div",{className:"glass-card empty-card"},React.createElement("div",{className:"empty-content"},React.createElement("div",{className:"empty-icon"},"\uD83D\uDCF7"),React.createElement("h2",{className:"empty-title"},"SIN RESULTADOS"),React.createElement("p",{className:"empty-text"},loading?'Analizando imagen con IA...':'Sube o captura una imagen para comenzar'),React.createElement("button",{className:"action-btn",onClick:function onClick(){return setActiveTab('capture');}},React.createElement("span",{className:"btn-icon"},"\uD83D\uDCF8"),React.createElement("span",{className:"btn-text"},"CAPTURAR IMAGEN")))),error&&React.createElement("div",{className:"glass-card error-card"},React.createElement("div",{className:"error-content"},React.createElement("div",{className:"error-icon"},"\u26A0\uFE0F"),React.createElement("h2",{className:"error-title"},"ERROR"),React.createElement("p",{className:"error-text"},error),React.createElement("button",{className:"action-btn secondary",onClick:resetAll},React.createElement("span",{className:"btn-icon"},"\uD83D\uDD04"),React.createElement("span",{className:"btn-text"},"INTENTAR NUEVAMENTE"))))),activeTab==='text'&&React.createElement("div",{className:"tab-content"},text?React.createElement("div",{className:"glass-card text-card"},React.createElement("div",{className:"card-header"},React.createElement("div",{className:"card-icon"},"\uD83D\uDCC4"),React.createElement("h2",{className:"card-title"},"TEXTO EXTRA\xCDDO")),React.createElement("div",{className:"text-content"},React.createElement("div",{className:"text-display"},isEditing?React.createElement("textarea",{className:"edit-area",value:editableText,onChange:function onChange(e){return setEditableText(e.target.value);},style:{width:'100%',background:'transparent',border:'1px solid var(--accent)',color:'white',borderRadius:'8px',padding:'10px',fontSize:'inherit',fontFamily:'inherit',minHeight:'200px'}}):text,React.createElement("button",{className:`edit-btn-float ${isEditing?'active':''}`,onClick:handleEditToggle,style:{position:'absolute',top:'10px',right:'10px',background:'var(--primary)',border:'none',borderRadius:'50%',width:'35px',height:'35px',display:'flex',alignItems:'center',justifyContent:'center',color:'white',fontSize:'1.2rem',boxShadow:'0 0 15px var(--primary)',zIndex:5}},isEditing?'ðŸ’¾':'âœï¸')),React.createElement("button",{className:"action-btn",onClick:function onClick(){return copyToClipboard(text);}},React.createElement("span",{className:"btn-icon"},"\uD83D\uDCCB"),React.createElement("span",{className:"btn-text"},"COPIAR TEXTO COMPLETO")))):React.createElement("div",{className:"glass-card empty-card"},React.createElement("div",{className:"empty-content"},React.createElement("div",{className:"empty-icon"},"\uD83D\uDD24"),React.createElement("h2",{className:"empty-title"},"NO HAY TEXTO"),React.createElement("p",{className:"empty-text"},"Procesa una imagen para extraer texto mediante OCR"),React.createElement("button",{className:"action-btn",onClick:function onClick(){return setActiveTab('capture');}},React.createElement("span",{className:"btn-icon"},"\uD83D\uDCF8"),React.createElement("span",{className:"btn-text"},"IR A CAPTURAR"))))),activeTab==='history'&&React.createElement("div",{className:"tab-content"},React.createElement("div",{className:"glass-card history-card"},React.createElement("div",{className:"card-header"},React.createElement("div",{className:"card-icon"},"\uD83D\uDD52"),React.createElement("h2",{className:"card-title"},"HISTORIAL RECIENTE"),history.length>0&&React.createElement("button",{className:"clear-all-btn",onClick:clearHistory,style:{background:'rgba(255, 77, 77, 0.2)',border:'1px solid #FF4D4D',color:'#FF4D4D',padding:'4px 10px',borderRadius:'6px',fontSize:'0.7rem'}},"BORRAR")),React.createElement("div",{className:"history-list",style:{maxHeight:'60vh',overflowY:'auto'}},history.length===0?React.createElement("div",{className:"empty-state",style:{textAlign:'center',padding:'40px 20px'}},React.createElement("div",{style:{fontSize:'3rem',marginBottom:'15px'}},"\uD83D\uDCED"),React.createElement("p",{style:{color:'rgba(255,255,255,0.6)'}},"No hay escaneos guardados localmente.")):history.map(function(item){return React.createElement("div",{key:item.id,className:"history-item",onClick:function onClick(){return restoreHistoryItem(item);},style:{padding:'15px',borderBottom:'1px solid rgba(255,255,255,0.1)',display:'flex',gap:'12px',cursor:'pointer'}},React.createElement("div",{className:"history-thumb",style:{width:'50px',height:'50px',borderRadius:'8px',overflow:'hidden',background:'#000'}},item.image&&React.createElement("img",{src:item.image,style:{width:'100%',height:'100%',objectFit:'cover'}})),React.createElement("div",{className:"history-info",style:{flex:1,overflow:'hidden'}},React.createElement("div",{style:{fontSize:'0.7rem',color:'var(--accent)',fontWeight:'bold'}},item.date),React.createElement("div",{style:{fontSize:'0.9rem',color:'white',whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis'}},item.text)),React.createElement("div",{style:{alignSelf:'center',color:'rgba(255,255,255,0.3)'}},"\u27A1\uFE0F"));}))))),React.createElement("footer",{className:"app-footer"},React.createElement("div",{className:"footer-glow"}),React.createElement("div",{className:"footer-content"},React.createElement("p",{className:"footer-brand"},"UBERTRON PRO AI v6.0"),React.createElement("div",{className:"footer-contact-mini"},React.createElement("span",null,"\uD83D\uDCE7 osiany@uotlook.com"),React.createElement("span",{className:"separator"},"\u2022"),React.createElement("span",null,"\uD83D\uDCF1 9983008729")))));};ReactDOM.render(React.createElement(App,null),document.getElementById('root'));
