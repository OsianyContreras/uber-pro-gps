<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Uber Pro GPS Edition</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Inter:wght@300;400;700;900&display=swap');
:root { --neon-blue:#00d2ff; --deep-blue:#0072ff; }

body{
  background:#050505;
  color:#fff;
  font-family:'Inter',sans-serif;
  margin:0;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}

.brand-title{
  font-family:'Orbitron',sans-serif;
  font-weight:900;
  font-size:2.5rem;
  letter-spacing:4px;
  color:#000;
  -webkit-text-stroke:1.5px var(--neon-blue);
  text-shadow:0 0 10px rgba(0,210,255,.7),0 0 20px rgba(0,210,255,.3);
}

.neon-container{
  position:relative;
  width:100%;
  max-width:400px;
  height:90vh;
  background:#0a0a0a;
  border-radius:40px;
  padding:3px;
  overflow:hidden;
  box-shadow:0 0 40px rgba(0,114,255,.3);
}

.neon-container::before{
  content:'';
  position:absolute;
  inset:-50%;
  background:conic-gradient(transparent,var(--neon-blue),var(--deep-blue),transparent 40%);
  animation:rotate 6s linear infinite;
}

@keyframes rotate{100%{transform:rotate(360deg)}}

.glass-panel{
  position:relative;
  z-index:1;
  background:rgba(10,10,10,.95);
  width:100%;
  height:100%;
  border-radius:37px;
  display:flex;
  flex-direction:column;
  padding:24px;
}

.ios-card{
  background:rgba(255,255,255,.03);
  backdrop-filter:blur(10px);
  border-radius:24px;
  border:1px solid rgba(255,255,255,.08);
  padding:20px;
}

#dropzone{
  flex:1;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  max-height:50vh;
  margin-bottom:20px;
}

.preview-img{
  max-width:100%;
  max-height:100%;
  object-fit:contain;
  border-radius:20px;
  display:none;
}

.btn-analyze{
  background:linear-gradient(135deg,#fff,#e0e0e0);
  color:#000;
  font-weight:900;
  border-radius:18px;
  box-shadow:0 10px 20px rgba(0,0,0,.4);
  transition:.3s;
  border:none;
  width:100%;
}

.btn-analyze:not(.active){
  opacity:.2;
  transform:scale(.95);
  pointer-events:none;
}

.btn-analyze.active{
  opacity:1;
  transform:scale(1);
}

.btn-copy{
  background:rgba(0,210,255,.15);
  color:var(--neon-blue);
  font-size:10px;
  font-weight:900;
  padding:8px 14px;
  border-radius:10px;
  border:1px solid rgba(0,210,255,.3);
}

#toast{
  position:fixed;
  top:40px;
  left:50%;
  transform:translateX(-50%) translateY(-100px);
  background:var(--deep-blue);
  color:#fff;
  padding:12px 24px;
  border-radius:50px;
  font-weight:800;
  font-size:12px;
  z-index:9999;
  transition:.5s;
}

#toast.visible{
  transform:translateX(-50%) translateY(0);
}

#global-loader{
  position:fixed;
  inset:0;
  background:#000;
  z-index:9999;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
}

.loader-ring{
  width:50px;
  height:50px;
  border:4px solid rgba(0,210,255,.1);
  border-top:4px solid var(--neon-blue);
  border-radius:50%;
  animation:spin 1s linear infinite;
}

@keyframes spin{100%{transform:rotate(360deg)}}
</style>
</head>

<body>

<div id="toast">COORDENADAS COPIADAS</div>

<div class="neon-container">
  <div class="glass-panel">

    <div class="text-center mb-6">
      <h1 class="brand-title">UBER PRO</h1>
    </div>

    <div id="ui-main" class="flex-1 flex flex-col">
      <div id="dropzone" class="ios-card">
        <input type="file" id="file-input" class="hidden" accept="image/*">
        <div id="upload-icon" class="text-center">
          <div class="w-16 h-16 bg-blue-500/10 rounded-full flex items-center justify-center mx-auto mb-4 border border-blue-500/20">
            ➕
          </div>
          <p class="text-xs font-black text-white/40 uppercase tracking-widest">Cargar Captura</p>
        </div>
        <img id="image-preview" class="preview-img">
      </div>

      <button id="analyze-trigger" class="btn-analyze py-5 text-xs uppercase tracking-[0.2em]">
        Analizar Trayecto ✨
      </button>
    </div>

    <div id="ui-results" class="hidden flex-1 flex flex-col space-y-4">
      <div class="ios-card">
        <p class="text-[11px] font-bold mb-2">Coordenadas detectadas</p>
        <code id="res-pickup-gps" class="text-blue-400 font-mono">0.000000, 0.000000</code>
        <button id="copy-origin" class="btn-copy mt-3">Copiar</button>
      </div>
    </div>

  </div>
</div>

<div id="global-loader" class="hidden">
  <div class="loader-ring mb-6"></div>
  <p class="text-sm font-black uppercase tracking-widest">Analizando imagen</p>
</div>

<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>

<script>
const fileInput=document.getElementById('file-input');
const imgPreview=document.getElementById('image-preview');
const btnAnalyze=document.getElementById('analyze-trigger');
const loader=document.getElementById('global-loader');
const resGps=document.getElementById('res-pickup-gps');
const copyBtn=document.getElementById('copy-origin');

function showLoader(v){loader.classList.toggle('hidden',!v);}

async function copy(text){
  await navigator.clipboard.writeText(text);
  toast.classList.add('visible');
  setTimeout(()=>toast.classList.remove('visible'),1800);
}

function openSygic(lat,lon){
  const sygic=`sygic://coordinate|${lat}|${lon}`;
  const google=`https://www.google.com/maps/search/?api=1&query=${lat},${lon}`;
  window.location.href=sygic;
  setTimeout(()=>window.location.href=google,1500);
}

function extractCoords(text){
  const regex=/(-?\d{1,2}\.\d{4,})\s*,?\s*(-?\d{1,3}\.\d{4,})/;
  const m=text.match(regex);
  if(!m) return null;
  return {lat:m[1],lon:m[2]};
}

async function analyze(){
  showLoader(true);
  try{
    const worker=await Tesseract.createWorker();
    await worker.loadLanguage('spa');
    await worker.initialize('spa');
    const {data}=await worker.recognize(imgPreview);
    await worker.terminate();

    const coords=extractCoords(data.text);
    if(!coords) throw 'NO_COORDS';

    const finalCoord=`${coords.lat}, ${coords.lon}`;
    resGps.innerText=finalCoord;
    await copy(finalCoord);
    openSygic(coords.lat,coords.lon);

    ui-main.classList.add('hidden');
    ui-results.classList.remove('hidden');

  }catch(e){
    alert('No se detectaron coordenadas visibles en la imagen.');
  }
  showLoader(false);
}

dropzone.onclick=()=>fileInput.click();

fileInput.onchange=e=>{
  const f=e.target.files[0];
  if(!f) return;
  const r=new FileReader();
  r.onload=ev=>{
    imgPreview.src=ev.target.result;
    imgPreview.style.display='block';
    btnAnalyze.classList.add('active');
  };
  r.readAsDataURL(f);
};

btnAnalyze.onclick=analyze;
copyBtn.onclick=()=>copy(resGps.innerText);
</script>

</body>
</html>
