<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Uber Pro GPS</title>
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
<style>
/* Base y Layout */
body{margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;background:radial-gradient(circle at top,#020617,#000);color:#fff;display:flex;justify-content:center;min-height:100vh;align-items:center}
.card{width:100%;max-width:400px;margin:20px;padding:24px;border-radius:24px;background:#020617;position:relative;box-shadow:0 0 0 1px rgba(148,163,184,.15),0 20px 40px -10px rgba(0,0,0,.5);animation:slideUp .6s ease-out}
.card::before{content:"";position:absolute;inset:-2px;border-radius:26px;background:linear-gradient(45deg,#22c55e,#0ea5e9,#22c55e);z-index:-1;filter:blur(1px);opacity:.6;animation:borderRotate 4s linear infinite}

/* Animaciones */
@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes borderRotate{0%{filter:hue-rotate(0deg)}100%{filter:hue-rotate(360deg)}}
@keyframes pulseGlow{0%{box-shadow:0 0 5px rgba(34,197,94,0.2)}50%{box-shadow:0 0 20px rgba(34,197,94,0.5)}100%{box-shadow:0 0 5px rgba(34,197,94,0.2)}}
@keyframes pulseText{50%{opacity:.5}}

h1{text-align:center;font-size:22px;margin:0 0 20px 0;font-weight:700;letter-spacing:-0.5px}
input[type=file]{width:100%;padding:12px;background:rgba(255,255,255,0.05);border-radius:12px;margin-bottom:15px;color:#94a3b8;font-size:14px;border:1px dashed rgba(148,163,184,0.3)}

img{width:100%;max-height:300px;object-fit:contain;border-radius:16px;margin-top:10px;background:rgba(0,0,0,0.3);display:none;opacity:0;transition:opacity .4s ease}
img.loaded{display:block;opacity:1}

.status{margin-top:15px;font-size:14px;color:#94a3b8;text-align:center;font-weight:500}
.status.analyzing{color:#22c55e;animation:pulseText 1.5s infinite ease-in-out}

/* RECUADRO DE COORDENADAS MEJORADO */
.coords-container {margin-top:20px; perspective: 1000px;}
.coords{
  padding:20px;
  border-radius:20px;
  background:rgba(22,163,74,0.05);
  border: 2px solid #22c55e; /* Borde m√°s grueso */
  cursor:pointer;
  transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  opacity:0;
  transform:translateY(10px);
  pointer-events:none;
  text-align: center;
  animation: pulseGlow 3s infinite; /* Efecto de brillo alrededor */
}
.coords.show{opacity:1;transform:translateY(0);pointer-events:auto}
.coords:active{transform:scale(0.95);background:rgba(22,163,74,0.15)}
.coords b{color:#22c55e;font-size:1.3em;text-shadow: 0 0 10px rgba(34,197,94,0.5)}
.label{color:#94a3b8;font-size:0.85em;text-transform:uppercase;letter-spacing:1px;margin-bottom:4px;display:block}
.coord-value{font-family:'Courier New', monospace;font-weight:bold}

.tap-hint {
  margin-top:12px;
  font-size:13px;
  color:#22c55e;
  font-weight:600;
  text-align:center;
  display:block;
}

/* Botones */
button{width:100%;padding:16px;margin-top:12px;border-radius:16px;border:none;font-size:16px;font-weight:700;background:#22c55e;color:#000;cursor:pointer;transition:all .2s ease;box-shadow:0 4px 15px rgba(34,197,94,0.3)}
button:active{transform:scale(0.96)}
button.danger{background:transparent;color:#ef4444;box-shadow:none;border:1px solid rgba(239,68,68,0.3);padding:12px;margin-top:25px}
button:disabled{opacity:.4;cursor:not-allowed}

/* Copyright y Toast */
.copyright{margin-top:30px;text-align:center;font-size:11px;color:#475569;letter-spacing:1px;font-weight:600}
.toast{position:fixed;bottom:30px;left:50%;transform:translateX(-50%) translateY(40px);background:#22c55e;color:#000;padding:12px 24px;border-radius:30px;font-size:14px;font-weight:800;opacity:0;transition:all .4s cubic-bezier(0.175, 0.885, 0.32, 1.275);z-index:100;box-shadow:0 10px 25px rgba(34,197,94,0.4)}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0)}
</style>
</head>
<body>

<div class="card">
  <h1>üöó Uber Pro GPS</h1>
  
  <input type="file" id="fileInput" accept="image/*">
  <img id="preview">
  
  <button id="analyzeBtn">üîç Analizar Captura</button>
  
  <div class="status" id="status">Espera de imagen...</div>

  <div class="coords-container">
    <div class="coords" id="coordsBlock" onclick="copiarAlPortapapeles()">
      <div>
        <span class="label">Latitud</span>
        <b class="coord-value" id="latVal">‚Äî</b>
      </div>
      <div style="margin-top:15px">
        <span class="label">Longitud</span>
        <b class="coord-value" id="lngVal">‚Äî</b>
      </div>
      <span class="tap-hint">üëÜ Toca para copiar</span>
    </div>
  </div>

  <button id="resetBtn" class="danger">üîÑ Nueva Consulta</button>

  <div class="copyright">@Copyright: Osiany2026</div>
</div>

<div id="toast" class="toast">‚úÖ COPIADO CON √âXITO</div>

<script>
let lat = null, lng = null;
const statusEl = document.getElementById("status");
const coordsBlock = document.getElementById("coordsBlock");
const previewImg = document.getElementById("preview");

function copiarAlPortapapeles() {
  if(!lat || !lng) return;
  const texto = lat + "," + lng;
  const el = document.createElement('textarea');
  el.value = texto;
  el.setAttribute('readonly', '');
  el.style.position = 'absolute';
  el.style.left = '-9999px';
  document.body.appendChild(el);
  el.select();
  document.execCommand('copy');
  document.body.removeChild(el);
  
  const t = document.getElementById("toast");
  t.classList.add("show");
  if(navigator.vibrate) navigator.vibrate(40);
  setTimeout(() => t.classList.remove("show"), 2000);
}

document.getElementById("fileInput").onchange = e => {
  const f = e.target.files[0];
  if(!f) return;
  previewImg.src = URL.createObjectURL(f);
  previewImg.classList.add("loaded");
  statusEl.textContent = "Imagen cargada. Pulsa Analizar.";
};

document.getElementById("analyzeBtn").onclick = async () => {
  if(!previewImg.src || previewImg.src === "") {
    alert("Selecciona una captura primero");
    return;
  }
  
  statusEl.textContent = "Procesando coordenadas... ‚è≥";
  statusEl.className = "status analyzing";
  document.getElementById("analyzeBtn").disabled = true;
  coordsBlock.classList.remove("show");
  
  try {
    const r = await Tesseract.recognize(previewImg.src, "eng");
    const m = r.data.text.match(/(-?\d{1,2}\.\d+)[,\s\n]+(-?\d{1,3}\.\d+)/);
    
    if(!m) throw "No se detectaron coordenadas.";

    lat = m[1];
    lng = m[2];

    document.getElementById("latVal").textContent = lat;
    document.getElementById("lngVal").textContent = lng;
    
    coordsBlock.classList.add("show");
    statusEl.textContent = "‚úÖ An√°lisis Finalizado";
    statusEl.className = "status";

  } catch(e) {
    statusEl.textContent = "‚ùå Error: " + e;
    statusEl.className = "status";
  } finally {
    document.getElementById("analyzeBtn").disabled = false;
  }
};

document.getElementById("resetBtn").onclick = () => {
  location.reload();
};
</script>
</body>
</html>
